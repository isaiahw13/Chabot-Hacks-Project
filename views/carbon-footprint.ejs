<!doctype html>
<html lang="en">
  <head>
    <link rel="icon" href="/img/favicon.ico" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Your Carbon Footprint</title>
    <!-- <link rel="icon" type="image/x-icon" href="public/img/favicon.ico" /> -->
    <link rel="stylesheet" href="carbon-footprint.css" />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar">
      <div class="navbar__container">
        <a href="/" id="navbar__logo">
          <i class="fas fa-gem"></i>Sustainable Future
        </a>

        <div class="navbar__toggle" id="mobile-menu">
          <span class="bar"></span> <span class="bar"></span>
          <span class="bar"></span>
        </div>
        <ul class="navbar__menu">
          <li class="navbar__item">
            <a href="/" class="navbar__links">Our Magazine </a>
          </li>
          <li class="navbar__btn">
            <a href="/about" class="button">Connect with Us</a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- calculator -->
    <div class="calculator-container">
      <h1>Calculate Your Carbon Footprint</h1>
      <div class="calculator">
        <iframe
          width="900"
          height="550"
          frameborder="0"
          marginwidth="0"
          marginheight="0"
          scrolling="yes"
          src="https://calculator.carbonfootprint.com/calculator.aspx"
        ></iframe>
      </div>
    </div>

    <!-- leaderboard -->
    <div class="leaderboard-container">
      <h2>Leaderboard</h2>
      <p>Top 10 Lowest Carbon Footprints</p>
      <div class="submission-box">
        <form action="/addUser" method="post">
          <input type="text" name="name" placeholder="Your Name" required />
          <input
            type="float"
            name="footprint"
            min="0.0001"
            placeholder="Metric Tons of CO₂e"
            required
          />
          <input type="submit" value="Submit" />
        </form>
      </div>
      <table class="leaderboard-table">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Carbon Footprint</th>
          </tr>
        </thead>
        <tbody>
          <%function sortUsers(a, b){return a.footprint - b.footprint;}%>
          <% if(users.length > 0) { %>
          <% users.sort(sortUsers); %>
          <% for(let i = 0; i < users.length && i < 10; i++) { %>
          <tr>
            <td><%= (i + 1) %></td>
            <td><%= users[i].name %></td>
            <td>
              <%= users[i].footprint.toLocaleString() + " Metric Tons of CO₂e"%>
            </td>
          </tr>
          <% } %>
          <% } %>
        </tbody>
      </table>
    </div>
  </body>
</html>
